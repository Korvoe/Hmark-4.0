commit 1ca43b9cef12e056156d299016214a1b206058e5
Author:     chuanqiw <chuanqi.wang@intel.com>
AuthorDate: Fri Apr 3 21:56:06 2020 +0800
Commit:     chuanqiw <chuanqi.wang@intel.com>
CommitDate: Fri Apr 3 21:56:06 2020 +0800

    upgrade curl version to 7.69.1 to fix CVE-2019-15601

diff --git a/tensorflow/workspace.bzl b/tensorflow/workspace.bzl
index 089570d..c8c1bf6 100755
--- a/tensorflow/workspace.bzl
+++ b/tensorflow/workspace.bzl
@@ -545,12 +545,12 @@ def tf_repositories(path_prefix = "", tf_repo_name = ""):
     tf_http_archive(
         name = "curl",
         build_file = clean_dep("//third_party:curl.BUILD"),
-        sha256 = "d0393da38ac74ffac67313072d7fe75b1fa1010eb5987f63f349b024a36b7ffb",
-        strip_prefix = "curl-7.66.0",
+        sha256 = "01ae0c123dee45b01bbaef94c0bc00ed2aec89cb2ee0fd598e0d302a6b5e0a98",
+        strip_prefix = "curl-7.69.1",
         system_build_file = clean_dep("//third_party/systemlibs:curl.BUILD"),
         urls = [
-            "https://storage.googleapis.com/mirror.tensorflow.org/curl.haxx.se/download/curl-7.66.0.tar.gz",
-            "https://curl.haxx.se/download/curl-7.66.0.tar.gz",
+            "https://storage.googleapis.com/mirror.tensorflow.org/curl.haxx.se/download/curl-7.69.1.tar.gz",
+            "https://curl.haxx.se/download/curl-7.69.1.tar.gz",
         ],
     )
 
diff --git a/third_party/curl.BUILD b/third_party/curl.BUILD
index f3a7e3f..292dca9 100644
--- a/third_party/curl.BUILD
+++ b/third_party/curl.BUILD
@@ -163,6 +163,7 @@ cc_library(
         "lib/quic.h",
         "lib/rand.c",
         "lib/rand.h",
+        "lib/rename.h",
         "lib/rtsp.c",
         "lib/rtsp.h",
         "lib/security.c",
@@ -183,13 +184,13 @@ cc_library(
         "lib/smb.h",
         "lib/smtp.h",
         "lib/sockaddr.h",
+        "lib/socketpair.h",
         "lib/socks.c",
         "lib/socks.h",
         "lib/speedcheck.c",
         "lib/speedcheck.h",
         "lib/splay.c",
         "lib/splay.h",
-        "lib/ssh.h",
         "lib/strcase.c",
         "lib/strcase.h",
         "lib/strdup.c",
@@ -219,13 +220,13 @@ cc_library(
         "lib/vauth/vauth.c",
         "lib/vauth/vauth.h",
         "lib/version.c",
+        "lib/vssh/ssh.h",
+        "lib/vtls/bearssl.h",
         "lib/vtls/gskit.h",
         "lib/vtls/gtls.h",
         "lib/vtls/mbedtls.h",
         "lib/vtls/nssg.h",
         "lib/vtls/openssl.h",
-        "lib/vtls/polarssl.h",
-        "lib/vtls/polarssl_threadlock.h",
         "lib/vtls/schannel.h",
         "lib/vtls/vtls.c",
         "lib/vtls/vtls.h",
